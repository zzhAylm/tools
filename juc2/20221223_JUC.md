

![image-20221225215054440](/Users/zzh/Library/Application Support/typora-user-images/image-20221225215054440.png)

```
CompletableFuture：获取异步任务，是比future更加强大的异步任务执行
```



![image-20221225220548861](/Users/zzh/Library/Application Support/typora-user-images/image-20221225220548861.png)

![image-20221226163950921](/Users/zzh/Library/Application Support/typora-user-images/image-20221226163950921.png)

![image-20221226173536269](/Users/zzh/Library/Application Support/typora-user-images/image-20221226173536269.png)

![image-20221226200009274](/Users/zzh/Library/Application Support/typora-user-images/image-20221226200009274.png)

![image-20221227194734708](/Users/zzh/Library/Application Support/typora-user-images/image-20221227194734708.png)

![image-20221227201510042](/Users/zzh/Library/Application Support/typora-user-images/image-20221227201510042.png)

![image-20221227214923640](/Users/zzh/Library/Application Support/typora-user-images/image-20221227214923640.png)

![image-20221227215509258](/Users/zzh/Library/Application Support/typora-user-images/image-20221227215509258.png)

![image-20221228213126051](/Users/zzh/Library/Application Support/typora-user-images/image-20221228213126051.png)



EntryList: 阻塞队列

![image-20221229200728212](/Users/zzh/Library/Application Support/typora-user-images/image-20221229200728212.png)



![image-20221229202144568](/Users/zzh/Library/Application Support/typora-user-images/image-20221229202144568.png)

![image-20221229202614630](/Users/zzh/Library/Application Support/typora-user-images/image-20221229202614630.png)

![image-20221229202641295](/Users/zzh/Library/Application Support/typora-user-images/image-20221229202641295.png)

![image-20221229211026718](/Users/zzh/Library/Application Support/typora-user-images/image-20221229211026718.png)

![image-20221229211722465](/Users/zzh/Library/Application Support/typora-user-images/image-20221229211722465.png)

![image-20221229215020689](/Users/zzh/Library/Application Support/typora-user-images/image-20221229215020689.png)



![image-20221229215844094](/Users/zzh/Library/Application Support/typora-user-images/image-20221229215844094.png)

![image-20221229220918651](/Users/zzh/Library/Application Support/typora-user-images/image-20221229220918651.png)

Lock： lock.newCondition()

Condition.await()

condition.single()

Interrupt()

Interrupted()

Isinterrupt()

LockSupport:

![image-20230102175255396](/Users/zzh/Library/Application Support/typora-user-images/image-20230102175255396.png)

![image-20230102175755362](/Users/zzh/Library/Application Support/typora-user-images/image-20230102175755362.png)

![image-20230102184341341](/Users/zzh/Library/Application Support/typora-user-images/image-20230102184341341.png)

![image-20230102184531648](/Users/zzh/Library/Application Support/typora-user-images/image-20230102184531648.png) 

![image-20230102190312678](/Users/zzh/Library/Application Support/typora-user-images/image-20230102190312678.png)

![image-20230102193605540](/Users/zzh/Library/Application Support/typora-user-images/image-20230102193605540.png)

![image-20230102200456271](/Users/zzh/Library/Application Support/typora-user-images/image-20230102200456271.png)

![image-20230102201029827](/Users/zzh/Library/Application Support/typora-user-images/image-20230102201029827.png)



 

![image-20230102201927824](/Users/zzh/Library/Application Support/typora-user-images/image-20230102201927824.png)

![image-20230102202730094](/Users/zzh/Library/Application Support/typora-user-images/image-20230102202730094.png)

![image-20230102203318501](/Users/zzh/Library/Application Support/typora-user-images/image-20230102203318501.png)

![image-20230102203509263](/Users/zzh/Library/Application Support/typora-user-images/image-20230102203509263.png)

![image-20230102203942273](/Users/zzh/Library/Application Support/typora-user-images/image-20230102203942273.png)

![image-20230102203924153](/Users/zzh/Library/Application Support/typora-user-images/image-20230102203924153.png)

![image-20230102204136510](/Users/zzh/Library/Application Support/typora-user-images/image-20230102204136510.png)

![image-20230102221127296](/Users/zzh/Library/Application Support/typora-user-images/image-20230102221127296.png)

happens-before：操作

![image-20230102222208110](/Users/zzh/Library/Application Support/typora-user-images/image-20230102222208110.png)

![image-20230102222919804](/Users/zzh/Library/Application Support/typora-user-images/image-20230102222919804.png)

volatile关键字：禁止指令重排，可见行，不能保证原子性

![image-20230102225556894](/Users/zzh/Library/Application Support/typora-user-images/image-20230102225556894.png)

volidate关键字实现远离，内存屏障：

![image-20230102230114554](/Users/zzh/Library/Application Support/typora-user-images/image-20230102230114554.png)![image-20230103000011596](/Users/zzh/Library/Application Support/typora-user-images/image-20230103000011596.png)

![image-20230103000408850](/Users/zzh/Library/Application Support/typora-user-images/image-20230103000408850.png)

![image-20230103213235213](/Users/zzh/Library/Application Support/typora-user-images/image-20230103213235213.png)

![image-20230103213802501](/Users/zzh/Library/Application Support/typora-user-images/image-20230103213802501.png) 

![image-20230103213824236](/Users/zzh/Library/Application Support/typora-user-images/image-20230103213824236.png)

volatile使用场景：

![image-20230103214021527](/Users/zzh/Library/Application Support/typora-user-images/image-20230103214021527.png)

![image-20230103214114653](/Users/zzh/Library/Application Support/typora-user-images/image-20230103214114653.png) 

![image-20230103214247453](/Users/zzh/Library/Application Support/typora-user-images/image-20230103214247453.png)

![image-20230103214802768](/Users/zzh/Library/Application Support/typora-user-images/image-20230103214802768.png)

![image-20230103215111596](/Users/zzh/Library/Application Support/typora-user-images/image-20230103215111596.png)

![image-20230103215126790](/Users/zzh/Library/Application Support/typora-user-images/image-20230103215126790.png) 

![image-20230103215145705](/Users/zzh/Library/Application Support/typora-user-images/image-20230103215145705.png)

![image-20230103220211043](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220211043.png)

![image-20230103220229050](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220229050.png)

![image-20230103220327421](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220327421.png)

![image-20230103220500479](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220500479.png)

![image-20230103220537098](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220537098.png)

![image-20230103220545494](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220545494.png)

![image-20230103220600891](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220600891.png)

 ![image-20230103220622294](/Users/zzh/Library/Application Support/typora-user-images/image-20230103220622294.png)

![image-20230104205435911](/Users/zzh/Library/Application Support/typora-user-images/image-20230104205435911.png)

![image-20230104211825870](/Users/zzh/Library/Application Support/typora-user-images/image-20230104211825870.png)

![image-20230104211715407](/Users/zzh/Library/Application Support/typora-user-images/image-20230104211715407.png)

 AtomicInteger: 通过volatile 实现可见行，，通过Unsafe类直接操作内存，获取对象的期望值，进行自旋，UnSafe通过native ，底层硬件保证cas原子操作安全性

```
    @IntrinsicCandidate
    public final native boolean compareAndSetInt(Object o, long offset,
                                                 int expected,
                                                 int x);
```

![image-20230104212524058](/Users/zzh/Library/Application Support/typora-user-images/image-20230104212524058.png)

自旋锁：

![image-20230104213822949](/Users/zzh/Library/Application Support/typora-user-images/image-20230104213822949.png)

![image-20230104215219187](/Users/zzh/Library/Application Support/typora-user-images/image-20230104215219187.png)

![image-20230105214751466](/Users/zzh/Library/Application Support/typora-user-images/image-20230105214751466.png)

![image-20230105215316509](/Users/zzh/Library/Application Support/typora-user-images/image-20230105215316509.png)

![image-20230105222025134](/Users/zzh/Library/Application Support/typora-user-images/image-20230105222025134.png)

![image-20230106205007071](/Users/zzh/Library/Application Support/typora-user-images/image-20230106205007071.png)

![image-20230106205428859](/Users/zzh/Library/Application Support/typora-user-images/image-20230106205428859.png)

![image-20230106211033868](/Users/zzh/Library/Application Support/typora-user-images/image-20230106211033868.png)

![image-20230106211203942](/Users/zzh/Library/Application Support/typora-user-images/image-20230106211203942.png)

![image-20230106211244803](/Users/zzh/Library/Application Support/typora-user-images/image-20230106211244803.png)

![image-20230106222955257](/Users/zzh/Library/Application Support/typora-user-images/image-20230106222955257.png)

![image-20230106223029209](/Users/zzh/Library/Application Support/typora-user-images/image-20230106223029209.png)

![image-20230106223147908](/Users/zzh/Library/Application Support/typora-user-images/image-20230106223147908.png)

![image-20230106223246761](/Users/zzh/Library/Application Support/typora-user-images/image-20230106223246761.png)

![image-20230106223336459](/Users/zzh/Library/Application Support/typora-user-images/image-20230106223336459.png)

![image-20230106223354666](/Users/zzh/Library/Application Support/typora-user-images/image-20230106223354666.png)

![image-20230106223404713](/Users/zzh/Library/Application Support/typora-user-images/image-20230106223404713.png)

![image-20230107190320316](/Users/zzh/Library/Application Support/typora-user-images/image-20230107190320316.png)

![image-20230107190958412](/Users/zzh/Library/Application Support/typora-user-images/image-20230107190958412.png)

![image-20230107203308549](/Users/zzh/Library/Application Support/typora-user-images/image-20230107203308549.png)

  ![image-20230107222825774](/Users/zzh/Library/Application Support/typora-user-images/image-20230107222825774.png)

![image-20230107223205133](/Users/zzh/Library/Application Support/typora-user-images/image-20230107223205133.png)

![image-20230107224435472](/Users/zzh/Library/Application Support/typora-user-images/image-20230107224435472.png)

![image-20230107234158339](/Users/zzh/Library/Application Support/typora-user-images/image-20230107234158339.png)

![image-20230107235234124](/Users/zzh/Library/Application Support/typora-user-images/image-20230107235234124.png)

![image-20230107235459857](/Users/zzh/Library/Application Support/typora-user-images/image-20230107235459857.png)

![image-20230108173332081](/Users/zzh/Library/Application Support/typora-user-images/image-20230108173332081.png)



![image-20230108180945195](/Users/zzh/Library/Application Support/typora-user-images/image-20230108180945195.png)

![image-20230108181715600](/Users/zzh/Library/Application Support/typora-user-images/image-20230108181715600.png)

![image-20230108183427238](/Users/zzh/Library/Application Support/typora-user-images/image-20230108183427238.png)

![image-20230108183528398](/Users/zzh/Library/Application Support/typora-user-images/image-20230108183528398.png)![image-20230108183811537](/Users/zzh/Library/Application Support/typora-user-images/image-20230108183811537.png)

![image-20230108184651303](/Users/zzh/Library/Application Support/typora-user-images/image-20230108184651303.png)

![image-20230108184820426](/Users/zzh/Library/Application Support/typora-user-images/image-20230108184820426.png)

![image-20230108184947075](/Users/zzh/Library/Application Support/typora-user-images/image-20230108184947075.png)

![image-20230108185127198](/Users/zzh/Library/Application Support/typora-user-images/image-20230108185127198.png)

![image-20230108204935574](/Users/zzh/Library/Application Support/typora-user-images/image-20230108204935574.png)

![image-20230108205617869](/Users/zzh/Library/Application Support/typora-user-images/image-20230108205617869.png)

![image-20230108210053805](/Users/zzh/Library/Application Support/typora-user-images/image-20230108210053805.png)

![image-20230108210620367](/Users/zzh/Library/Application Support/typora-user-images/image-20230108210620367.png)

![image-20230108211134016](/Users/zzh/Library/Application Support/typora-user-images/image-20230108211134016.png)

![image-20230108212819706](/Users/zzh/Library/Application Support/typora-user-images/image-20230108212819706.png)

![image-20230108213119029](/Users/zzh/Library/Application Support/typora-user-images/image-20230108213119029.png)

![image-20230108214625529](/Users/zzh/Library/Application Support/typora-user-images/image-20230108214625529.png)

![image-20230108214851300](/Users/zzh/Library/Application Support/typora-user-images/image-20230108214851300.png)

![image-20230108215953643](/Users/zzh/Library/Application Support/typora-user-images/image-20230108215953643.png)

![image-20230108223101392](/Users/zzh/Library/Application Support/typora-user-images/image-20230108223101392.png)

![image-20230109003231718](/Users/zzh/Library/Application Support/typora-user-images/image-20230109003231718.png)

![image-20230109003526597](/Users/zzh/Library/Application Support/typora-user-images/image-20230109003526597.png)

![image-20230109004613227](/Users/zzh/Library/Application Support/typora-user-images/image-20230109004613227.png)

![image-20230109010721620](/Users/zzh/Library/Application Support/typora-user-images/image-20230109010721620.png)

![image-20230109103823642](/Users/zzh/Library/Application Support/typora-user-images/image-20230109103823642.png)

![image-20230109104746294](/Users/zzh/Library/Application Support/typora-user-images/image-20230109104746294.png)

![image-20230109104910480](/Users/zzh/Library/Application Support/typora-user-images/image-20230109104910480.png)

![image-20230109105513151](/Users/zzh/Library/Application Support/typora-user-images/image-20230109105513151.png)

![image-20230109212445897](/Users/zzh/Library/Application Support/typora-user-images/image-20230109212445897.png)

![image-20230109220502867](/Users/zzh/Library/Application Support/typora-user-images/image-20230109220502867.png)

![image-20230109220748026](/Users/zzh/Library/Application Support/typora-user-images/image-20230109220748026.png)

![image-20230109221102197](/Users/zzh/Library/Application Support/typora-user-images/image-20230109221102197.png)

![image-20230109221342015](/Users/zzh/Library/Application Support/typora-user-images/image-20230109221342015.png)

![image-20230109222520803](/Users/zzh/Library/Application Support/typora-user-images/image-20230109222520803.png)

![image-20230109223122945](/Users/zzh/Library/Application Support/typora-user-images/image-20230109223122945.png)

![image-20230110101347724](/Users/zzh/Library/Application Support/typora-user-images/image-20230110101347724.png)

![image-20230110110748524](/Users/zzh/Library/Application Support/typora-user-images/image-20230110110748524.png)

![image-20230110112909835](/Users/zzh/Library/Application Support/typora-user-images/image-20230110112909835.png)

![image-20230110113128347](/Users/zzh/Library/Application Support/typora-user-images/image-20230110113128347.png)

![image-20230110114224027](/Users/zzh/Library/Application Support/typora-user-images/image-20230110114224027.png)

![image-20230110195825822](/Users/zzh/Library/Application Support/typora-user-images/image-20230110195825822.png)

![image-20230110201713337](/Users/zzh/Library/Application Support/typora-user-images/image-20230110201713337.png)

![image-20230111221014321](/Users/zzh/Library/Application Support/typora-user-images/image-20230111221014321.png)

![image-20230111221108363](/Users/zzh/Library/Application Support/typora-user-images/image-20230111221108363.png)

![image-20230111222346819](/Users/zzh/Library/Application Support/typora-user-images/image-20230111222346819.png)

![image-20230111223700696](/Users/zzh/Library/Application Support/typora-user-images/image-20230111223700696.png)

![image-20230111223916553](/Users/zzh/Library/Application Support/typora-user-images/image-20230111223916553.png)

![image-20230111224629844](/Users/zzh/Library/Application Support/typora-user-images/image-20230111224629844.png)

![image-20230111225014995](/Users/zzh/Library/Application Support/typora-user-images/image-20230111225014995.png)

![image-20230111225308293](/Users/zzh/Library/Application Support/typora-user-images/image-20230111225308293.png)

![image-20230112145408864](/Users/zzh/Library/Application Support/typora-user-images/image-20230112145408864.png)

